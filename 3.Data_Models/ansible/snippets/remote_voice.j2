! REMOTE OFFICE ROUTER - BOILERPLATE VOICE CONFIG
voice call send-alert
voice rtp send-recv
!
voice service voip
 dtmf-interworking rtp-nte
 allow-connections h323 to h323
 allow-connections h323 to sip
 allow-connections sip to h323
 allow-connections sip to sip
 no supplementary-service sip moved-temporarily
 no supplementary-service sip refer
 redirect ip2ip
 fax protocol t38 version 0 ls-redundancy 0 hs-redundancy 0 fallback none
 modem passthrough nse codec g711ulaw
 h323
  h225 timeout tcp call-idle value 0
  no h225 timeout keepalive
  h225 h245-address on-connect
  h225 connect-passthru
  call start slow
  call preserve limit-media-detection
  session transport tcp calls-per-connection 1
  h245 tunnel disable
  h245 caps mode restricted
 sip
  no update-callerid
  midcall-signaling passthru media-change
  early-offer forced
  no call service stop
!
voice class codec 1
 codec preference 1 g711ulaw
 codec preference 2 g729r8
!
voice class codec 5
 codec preference 1 g729br8
 codec preference 2 g729r8
 codec preference 3 g711ulaw

voice-port 0/1/0
!
voice-port 0/1/1
!
voice-port 0/1/2
!
voice-port 0/1/3
 !
 !
 !
 !
!
mgcp behavior rsip-range tgcp-only
mgcp behavior comedia-role none
mgcp behavior comedia-check-media-src disable
mgcp behavior comedia-sdp-force disable
!
mgcp profile default
!
sccp local Loopback0
sccp ccm 10.5.20.21 identifier 3 priority 3 version 7.0 
sccp ccm 10.3.21.23 identifier 1 priority 1 version 7.0 
sccp ccm 10.3.21.21 identifier 2 priority 2 version 7.0 
sccp
!
sccp ccm group 1
 description Call Control Group
 associate ccm 1 priority 1
 associate ccm 2 priority 2
 associate ccm 3 priority 3
 associate profile 2 register CDO-XCODE
 associate profile 1 register CDO-CONF
 associate profile 3 register CDO-MTP1
!
!
!
dspfarm profile 2 transcode  
 associate application SCCP
 shutdown
!
dspfarm profile 1 conference  
 associate application SCCP
shutdown
!
dspfarm profile 3 mtp  
 codec g711ulaw
 maximum sessions software 50
 associate application SCCP
!
dial-peer voice 911 pots
 description 911 Calling
 preference 1
 destination-pattern 911
 progress_ind setup enable 3
 progress_ind progress enable 8
 progress_ind connect enable 8
 forward-digits 3
!
dial-peer voice 9911 pots
 description 9911 Calling
 preference 2
 destination-pattern 9911
 progress_ind setup enable 3
 progress_ind progress enable 8
 progress_ind connect enable 8
 forward-digits 3
!
dial-peer voice 9001 pots
 description Outbound Calling
 preference 1
 destination-pattern 91[2-9]..[2-9]......
 progress_ind setup enable 3
 progress_ind progress enable 8
 progress_ind connect enable 8
 forward-digits 11
!
!
!
call-manager-fallback
 secondary-dialtone 9
 max-conferences 6 gain -6
 transfer-system full-consult
 timeouts interdigit 5
 ip source-address {{ config'[loopback_ip'] }} port 2000
 max-ephones 100
 max-dn 200 dual-line
 system message primary CM Down, SRST Enabled
 keepalive 45
 moh enable-g711 "SampleAudioSource.ulaw.wav"
 multicast moh 239.192.1.1 port 16384 route {{ config'[loopback_ip'] }}

